{"version":3,"sources":["../../ts/src/pagy.ts"],"names":[],"mappings":"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","file":"pagy.js","sourcesContent":["// This file is the source that generates pagy.js, polyfilled with the `@babel/preset-env` `\"useBuiltIns\": \"entry\"`.\n// You can generate a custom targeted javascript file for the browsers you need by changing that settings in package.json,\n// then compile it with `npm run compile -w ts`.\n\n// Add pagyRender to Element\ninterface Element {\n    pagyRender():void;\n}\n\n// Add pagyRender to HTMLElement\ninterface HTMLElement {\n    pagyRender():void;\n}\n\n// Tags from the data-pagy-json of *nav_js helpers\ninterface NavTags {\n    readonly before:string;\n    readonly link:string;\n    readonly active:string;\n    readonly gap:string;\n    readonly after:string;\n}\n\n// Tags from the data-pagy-json of *nav_js helpers\ninterface NavSequels {\n    readonly [width:string]:(string|number|\"gap\")[];\n}\n\n// Tags from the data-pagy-json of *nav_js helpers\ninterface NavLabelSequels {\n    [width:string]:(string|\"gap\")[];\n}\n\n// The Pagy object\nconst Pagy = {\n    version: \"5.6.7\",\n\n    // Scan for \"data-pagy-json\" elements, parse their JSON content and apply their functions\n    init(arg?:any) {\n        const target:Document|HTMLElement = arg instanceof HTMLElement ? arg : document;\n        const elements = target.querySelectorAll(\"[data-pagy-json]\");\n        for (const element of elements) {\n            const json = element.getAttribute(\"data-pagy-json\");\n            if (json === null) {\n                continue;\n            }\n            let args = JSON.parse(json);\n            const fname:\"nav\"|\"combo_nav\"|\"items_selector\" = args.shift();\n            if (fname === \"nav\") {\n                Pagy.nav(element, ...<[NavTags, NavSequels, null|NavLabelSequels, string]>args);\n            }\n            else if (fname === \"combo_nav\") {\n                Pagy.combo_nav(element, ...<[string, string, string]>args);\n            }\n            else if (fname === \"items_selector\") {\n                Pagy.items_selector(element, ...<[number, string, string]>args);\n            }\n        }\n    },\n\n    // Power the *_nav_js helpers\n    nav(pagyEl:Element, tags:NavTags, sequels:NavSequels, opt_label_sequels:null|NavLabelSequels, trimParam?:string) {\n        let label_sequels:NavLabelSequels = {};\n        // Handle null label_sequels\n        if (opt_label_sequels === null) {\n            for (const width in sequels) {\n                label_sequels[width] = sequels[width].map((item) => item.toString());\n            }\n        }\n        else {\n            label_sequels = opt_label_sequels;\n        }\n        // Set and sort the widths as number[]\n        const widths = Object.getOwnPropertyNames(sequels)\n                             .map((w) => parseInt(w))\n                             .sort((a, b) => b - a);\n        let lastWidth:number;\n        const fillIn = (string:string, item:string, label:string):string =>\n            string.replace(/__pagy_page__/g, item)\n                  .replace(/__pagy_label__/g, label);\n\n        pagyEl.pagyRender = function (this:Element) {\n            let width:number = 0;\n            for (const w of widths) {\n                if (this.parentElement !== null && this.parentElement.clientWidth > w) {\n                    width = w;\n                    break;\n                }\n            }\n            // Only if the width changed\n            if (width !== lastWidth) {\n                let html = tags.before;\n                const series = sequels[width.toString()];\n                const labels = label_sequels[width.toString()];\n                for (const i in series) {\n                    const item = series[i];\n                    const label = labels[i];\n                    if (typeof trimParam === \"string\" && item === 1) {\n                        const link = fillIn(tags.link, item.toString(), label);\n                        html += Pagy.trim(link, trimParam);\n                    }\n                    else if (typeof item === \"number\") {\n                        html += fillIn(tags.link, item.toString(), label);\n                    }\n                    else if (item === \"gap\") {\n                        html += tags.gap;\n                    }\n                    else { // active page\n                        html += fillIn(tags.active, item, label);\n                    }\n                }\n                html += tags.after;\n                this.innerHTML = \"\";\n                this.insertAdjacentHTML(\"afterbegin\", html);\n                lastWidth = width;\n            }\n        }.bind(pagyEl);\n        pagyEl.pagyRender();\n        // If there is a window object then add a single \"resize\" event listener\n        if (typeof window !== \"undefined\") {\n            window.addEventListener(\"resize\", Pagy.throttleRenderNavs, true);\n        }\n    },\n\n    // throttleRenderNavs properties\n    throttleRenderNavsTID:   0,      // private\n    throttleRenderNavsDelay: 100,    // set a default delay\n\n    // Avoid to fire the pagyRender multiple times\n    throttleRenderNavs() {\n        clearTimeout(Pagy.throttleRenderNavsTID);\n        Pagy.throttleRenderNavsTID = window.setTimeout(Pagy.renderNavs, Pagy.throttleRenderNavsDelay);\n    },\n\n    // Render all *nav_js helpers (i.e. all the elements of class \"pagy-njs\")\n    renderNavs() {\n        const navs:HTMLCollectionOf<Element> = document.getElementsByClassName(\"pagy-njs\");\n        for (const nav of navs) {\n            nav.pagyRender();\n        }\n    },\n\n    // Power the *_combo_nav_js helpers\n    combo_nav(pagyEl:Element, page:string, link:string, trimParam?:string) {\n        const input:HTMLInputElement = pagyEl.getElementsByTagName(\"input\")[0];\n        const goToPage = function () {\n            if (page !== input.value) {\n                let html = link.replace(/__pagy_page__/, input.value);\n                if (typeof trimParam === \"string\" && input.value === \"1\") {\n                    html = Pagy.trim(html, trimParam);\n                }\n                pagyEl.insertAdjacentHTML(\"afterbegin\", html);\n                pagyEl.getElementsByTagName(\"a\")[0].click();\n            }\n        };\n        Pagy.addInputBehavior(input, goToPage);\n    },\n\n    // Power the trim extra for js helpers\n    trim(link:string, param:string):string {\n        const re = new RegExp(`[?&]${param}=1\\\\b(?!&)|\\\\b${param}=1&`);\n        return link.replace(re, \"\");\n    },\n\n    // Power the pagy_items_selector_js helper\n    items_selector(pagyEl:Element, from:number, link:string, trimParam?:string) {\n        const input:HTMLInputElement = pagyEl.getElementsByTagName(\"input\")[0];\n        const current = input.value;\n        const goToPage = function () {\n            const items = input.value;\n            if (items === \"0\" || items === \"\") {\n                return;\n            }\n            if (current !== items) {\n                const page = Math.max(Math.ceil(from / parseInt(items)), 1).toString();\n                let html = link.replace(/__pagy_page__/, page)\n                               .replace(/__pagy_items__/, items);\n                if (typeof trimParam === \"string\" && page === \"1\") {\n                    html = Pagy.trim(html, trimParam);\n                }\n                pagyEl.insertAdjacentHTML(\"afterbegin\", html);\n                pagyEl.getElementsByTagName(\"a\")[0].click();\n            }\n        };\n        Pagy.addInputBehavior(input, goToPage);\n    },\n\n    // Add behavior to input fields\n    addInputBehavior(input:HTMLInputElement, goToPage:Function) {\n        // select the content on click: easier for direct typing\n        input.addEventListener(\"click\", function (_e) {\n            this.select();\n        });\n        // goToPage when the input loses focus\n        input.addEventListener(\"focusout\", function (_e) {\n            goToPage();\n        });\n        // goToPage when pressing enter while the input has focus\n        input.addEventListener(\"keypress\", function (e:KeyboardEvent) {\n            if (e.key === \"Enter\") {\n                goToPage();\n            }\n        }.bind(this));\n    }\n};\n"]}